"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[995],{2168:function(e,n,o){o.d(n,{Z:function(){return f}});var i=o(5288),a=o(7707),t=o(2766);const l=e=>((0,i.dD)("data-v-2d25f6b7"),e=e(),(0,i.Cn)(),e),u={id:"navbar"},d=l((()=>(0,i._)("h2",{id:"logo"},[(0,i._)("a",{href:"/"},"TEAMEET")],-1))),r=["href"];var c=(0,i.aZ)({__name:"Navbar",emits:["loadfinished"],setup(e,{emit:n}){const o=(0,t.iH)(null),l=(0,t.iH)({loaded:!1,name:"",uuid:0});return(0,i.bv)((()=>{o.value.href="/login?href="+(encodeURI(window.location.pathname+window.location.search)||"/"),fetch("/api/login").then((e=>e.json())).then((e=>{200!=e.status?n("loadfinished",{loggedIn:!1}):(l.value={loaded:!0,name:e.body.name,uuid:e.body.uuid},n("loadfinished",{loggedIn:!0,payload:e.body}))}))})),(e,n)=>((0,i.wg)(),(0,i.iD)("div",u,[d,(0,i._)("div",null,[l.value.loaded?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("a",{key:0,class:"account",ref_key:"login",ref:o},"login",512)),l.value.loaded?((0,i.wg)(),(0,i.iD)("a",{key:1,class:"account",href:"/profile/?id="+l.value.uuid},(0,a.zw)(l.value?.name),9,r)):(0,i.kq)("",!0)])]))}}),s=o(7184);const m=(0,s.Z)(c,[["__scopeId","data-v-2d25f6b7"]]);var f=m},3995:function(e,n,o){o.r(n),o.d(n,{default:function(){return D}});var i=o(5288),a=o(7707),t=o(2766),l=o(2168);const u=e=>((0,i.dD)("data-v-4e080168"),e=e(),(0,i.Cn)(),e),d={id:"name"},r={id:"info"},c=u((()=>(0,i._)("label",null,"description:",-1))),s={id:"description"},m=u((()=>(0,i._)("br",null,null,-1))),f=(0,i.Uk)(" owner: "),g=["href"],v=(0,i.Uk)(" members: "),h=["href"],b=["href"],p={key:3,id:"member"};var w;(function(e){e[e["undefined"]=0]="undefined",e[e["logged_out"]=1]="logged_out",e[e["logged_in"]=2]="logged_in",e[e["member"]=3]="member",e[e["owner"]=4]="owner"})(w||(w={}));var _=(0,i.aZ)({__name:"Project",setup(e){const n=(0,t.iH)({name:"sorry, we coudn't find this project",description:"you can go back to the homepage",owner:{name:"",uuid:0},members:[]}),o=(0,t.iH)(w.undefined),u=(0,t.iH)(0),_=new URLSearchParams(document.location.search);function k(){}function y(){fetch("/api/project/?id="+_.get("id"),{method:"DELETE"}).then((e=>{window.location.href="/"}))}return(0,i.bv)((()=>{function e(e,n){for(let o of n.members)if(o.uuid==e)return!0;return!1}function i(){fetch("/api/login").then((e=>e.json())).then((async i=>{200==i.status?i.body.uuid!=n.value.owner.uuid?e(i.body.uuid,n.value)?o.value=w.member:o.value=w.logged_in:o.value=w.owner:o.value=w.logged_out}))}_.get("id")?(u.value=Number.parseInt(_.get("id")??""),fetch("/api/project?id="+_.get("id")).then((e=>e.json())).then((e=>{200==e.status?(n.value=e.body.projects[0],document.title=`${n.value.name} | Teameet`,i()):console.error(e)}))):location.href="/"})),(e,t)=>((0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(l.Z),(0,i._)("main",null,[(0,i._)("h2",d,(0,a.zw)(n.value.name),1),(0,i._)("div",r,[c,(0,i._)("p",s,(0,a.zw)(n.value.description),1),m,(0,i._)("p",null,[f,(0,i._)("a",{class:"personlink",href:"/profile/?id="+n.value.owner.uuid},(0,a.zw)(n.value.owner.name),9,g)]),(0,i._)("p",null,[v,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.value.members,(e=>((0,i.wg)(),(0,i.iD)("a",{class:"personlink",key:e.id,href:"/profile/?id="+e.uuid},(0,a.zw)(e.name)+",",9,h)))),128))])]),(0,i._)("div",null,[o.value==w.owner?((0,i.wg)(),(0,i.iD)("button",{key:0,onClick:t[0]||(t[0]=e=>y()),id:"settings"}," delete this project ")):(0,i.kq)("",!0),o.value==w.logged_out?((0,i.wg)(),(0,i.iD)("a",{key:1,class:"button",id:"memberlogin",href:"/login?href=/project/?id="+u.value},"login to become a member",8,b)):(0,i.kq)("",!0),o.value==w.logged_in?((0,i.wg)(),(0,i.iD)("button",{key:2,id:"joinbutton",style:{cursor:"pointer"},onClick:t[1]||(t[1]=e=>k())}," become a member ")):(0,i.kq)("",!0),o.value==w.member?((0,i.wg)(),(0,i.iD)("span",p,"you are a member")):(0,i.kq)("",!0)])])]))}}),k=o(7184);const y=(0,k.Z)(_,[["__scopeId","data-v-4e080168"]]);var D=y}}]);
//# sourceMappingURL=995.e49b6684.js.map